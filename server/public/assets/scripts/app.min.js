/*! 2015-12-02 */
function getData(){$.ajax({type:"GET",url:"/data",success:function(a){globaldata=a,console.log("I got the data",globaldata),addDataToMap(globaldata)}})}function initMap(){map=new google.maps.Map(document.getElementById("map"),{center:{lat:44.87608,lng:-93.329406},zoom:9})}function addDataToMap(a){for(var b=0;b<a.length;b++)console.log("in le loop",a[b]),map.data.addGeoJson(a[b]);console.log("Look at me! This is the format the data is in when the annotations on the map are loaded",a);var c=new google.maps.InfoWindow;map.data.addListener("click",function(a){var b=a.feature.getProperty("name"),d=a.feature.getProperty("address");c.setContent("<div style='width:150px; text-align: center;'>"+b+" <br>"+d+"</div>"),c.setPosition(a.feature.getGeometry().get()),c.setOptions({pixelOffset:new google.maps.Size(0,-30)}),c.open(map)})}function geolocationBtn(){$("#currentLocation").on("click",function(){function a(a,b,c){b.setPosition(c),b.setContent(a?"Error: The Geolocation service failed.":"Error: Your browser doesn't support geolocation.")}console.log("click happened");var b=new google.maps.InfoWindow({map:map});navigator.geolocation?navigator.geolocation.getCurrentPosition(function(a){var c={lat:a.coords.latitude,lng:a.coords.longitude};b.setPosition(c),b.setContent("I spy with my 20,000 satellites..."),map.setCenter(c)},function(){a(!0,b,map.getCenter())}):a(!1,b,map.getCenter())})}var globaldata=[],map;$(document).ready(function(){console.log("Up and running!"),initMap(),getData(),geolocationBtn()});