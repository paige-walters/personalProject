/*! 2015-12-01 */
function getData(){$.ajax({type:"GET",url:"/data",success:function(a){globaldata=a[0],console.log("I got the data",globaldata),addDataToMap(globaldata),dropDownList(globaldata)}})}function initMap(){map=new google.maps.Map(document.getElementById("map"),{center:{lat:44.87608,lng:-93.329406},zoom:9})}function dropDownList(a){for(var b=0;b<a.features.length;b++)$("#dropdownlist").append("<option>"+b+" - "+a.features[b].properties.name+"</option>");$("select").material_select()}function addDataToMap(a){map.data.addGeoJson(a);var b=new google.maps.InfoWindow;map.data.addListener("click",function(a){var c=a.feature.getProperty("name"),d=a.feature.getProperty("address");b.setContent("<div style='width:150px; text-align: center;'>"+c+" <br>"+d+"</div>"),b.setPosition(a.feature.getGeometry().get()),b.setOptions({pixelOffset:new google.maps.Size(0,-30)}),b.open(map)})}function geolocationBtn(){$("#currentLocation").on("click",function(){function a(a,b,c){b.setPosition(c),b.setContent(a?"Error: The Geolocation service failed.":"Error: Your browser doesn't support geolocation.")}console.log("click happened");var b=new google.maps.InfoWindow({map:map});navigator.geolocation?navigator.geolocation.getCurrentPosition(function(a){var c={lat:a.coords.latitude,lng:a.coords.longitude};b.setPosition(c),b.setContent("I spy with my 20,000 satellites..."),map.setCenter(c)},function(){a(!0,b,map.getCenter())}):a(!1,b,map.getCenter())})}var globaldata=[],map;$(document).ready(function(){console.log("Up and running!"),initMap(),getData(),geolocationBtn()});